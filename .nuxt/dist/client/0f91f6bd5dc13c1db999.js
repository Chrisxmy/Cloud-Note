(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{191:function(t,e,r){var content=r(215);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("4c851083",content,!0,{sourceMap:!1})},192:function(t,e,r){var content=r(221);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("30371855",content,!0,{sourceMap:!1})},193:function(t,e,r){"use strict";r(36),r(13);e.a={methods:{dispatch:function(t,e,r){for(var n=this.$parent||this.$root,o=n.$options.name;n&&(!o||o!==t);)(n=n.$parent)&&(o=n.$options.name);n&&n.$emit.apply(n,[e].concat(r))},broadcast:function(t,e,r){(function t(e,r,n){this.$children.forEach(function(o){o.$options.name===e?o.$emit.apply(o,[r].concat(n)):t.apply(o,[e,r].concat([n]))})}).call(this,t,e,r)}}}},202:function(t,e,r){var content=r(238);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("07fb42c3",content,!0,{sourceMap:!1})},214:function(t,e,r){"use strict";var n=r(191);r.n(n).a},215:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,".m-input_wrapper{height:30px;display:flex;width:100%}.m-input{height:30px;width:100%;border-radius:4px;border:1px solid #ccc;padding-left:20px;transition:border .4s}.m-input-left-radius{border-radius:4px 0 0 4px;border-right:none}.m-input-right-radius{border-radius:0 4px 4px 0}.m-input:focus{border:1px solid #7568f3}.m-input-button{background:#7568f3;color:#fff;font-size:12px;height:30px;line-height:30px;text-align:center;border-radius:0 4px 4px 0;width:100px;cursor:pointer}",""])},220:function(t,e,r){"use strict";var n=r(192);r.n(n).a},221:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,'.m-form-item{height:50px}.m-form-item>.label{height:30px;line-height:30px;margin-right:10px;text-align:right;width:80px}.m-form-item__message{font-size:12px;color:red}.m-form-item__label-required:before{content:"* ";color:red}',""])},223:function(t,e,r){"use strict";var n={name:"mInput",mixins:[r(193).a],inject:{mFormItem:{default:""}},props:{value:{type:String,default:""},placeholder:{type:String,default:""}},data:function(){return{currentValue:"",append:!1}},created:function(){this.currentValue=this.value},mounted:function(){this.$slots.append&&(this.append=!0)},computed:{validateState:function(){return this.mFormItem.validateState}},watch:{value:function(t){this.currentValue=t}},methods:{handleInput:function(t){var e=event.target.value;this.currentValue=e,this.$emit("input",e),this.dispatch("mFormItem","on-form-change",e)},handleBlur:function(){this.dispatch("mFormItem","on-form-blur",this.currentValue)}}},o=(r(214),r(34)),component=Object(o.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"m-input_wrapper"},[r("input",{ref:"input",staticClass:"m-input",class:[{error:"error"===t.validateState},{"m-input-left-radius":t.append}],attrs:{placeholder:t.placeholder},domProps:{value:t.currentValue},on:{input:t.handleInput,blur:t.handleBlur}}),t._v(" "),t.append?r("p",{staticClass:"m-input-button"},[t._t("append")],2):t._e()])},[],!1,null,null,null);e.a=component.exports},224:function(t,e,r){"use strict";var n=r(193),o=r(243),l=r.n(o),c={name:"mFormItem",mixins:[n.a],inject:["form"],provide:function(){return{mFormItem:this}},props:{label:{type:String,default:""},prop:{type:String}},data:function(){return{isRequired:"",validateState:"",validateMessage:""}},computed:{fieldValue:function(){return this.form.model[this.prop]}},mounted:function(){this.prop&&(this.dispatch("mForm","on-form-item-add",this),this.initialValue=this.fieldValue,this.setRules())},methods:{getRules:function(){var t=this.form.rules;return t=t?t[this.prop]:[],[].concat(t||[])},setRules:function(){var t=this,e=this.getRules();e.length&&e.every(function(e){t.isRequired=e.required}),this.$on("on-form-blur",this.onFieldBlur),this.$on("on-form-change",this.onFieldChange)},getFilteredRule:function(t){return this.getRules().filter(function(e){return!e.trigger||-1!==e.trigger.indexOf(t)})},validate:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.getFilteredRule(t);if(!n||0===n.length)return!0;this.validateState="validating";var o={};o[this.prop]=n;var c=new l.a(o),d={};d[this.prop]=this.fieldValue,c.validate(d,{firstFields:!0},function(t){e.validateState=t?"error":"success",e.validateMessage=t?t[0].message:"",r(e.validateMessage)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validate("change")},resetField:function(){this.validateState="",this.validateMessage="",this.form.model[this.prop]=this.initialValue}},beforeDestroy:function(){this.dispatch("mForm","on-form-item-remove",this)}},d=(r(220),r(34)),component=Object(d.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"m-form-item"},[t.label?r("label",{staticClass:"label",class:{"m-form-item__label-required":t.isRequired}},[t._v(t._s(t.label))]):t._e(),t._v(" "),[t._t("default"),t._v(" "),"error"===t.validateState?r("span",{staticClass:"m-form-item__message"},[t._v(t._s(t.validateMessage))]):t._e()]],2)},[],!1,null,null,null);e.a=component.exports},225:function(t,e,r){"use strict";r(13);var n={name:"mForm",provide:function(){return{form:this}},props:{model:{type:Object},rules:{type:Object}},data:function(){return{fields:[]}},methods:{resetFields:function(){this.fields.forEach(function(t){t.resetField()})},validate:function(t){var e=this;return new Promise(function(r){var n=!0,o=0;e.fields.forEach(function(l){l.validate("",function(l){l&&(n=!1),++o===e.fields.length&&(r(n),"function"==typeof t&&t(n))})})})}},created:function(){var t=this;this.$on("on-form-item-add",function(e){e&&t.fields.push(e),console.log(t.fields)}),this.$on("on-form-item-remove",function(e){e.prop&&t.fields.splice(t.fields.indexOf(e),1)})}},o=r(34),component=Object(o.a)(n,function(){var t=this.$createElement;return(this._self._c||t)("form",{staticClass:"m-form"},[this._t("default")],2)},[],!1,null,null,null);e.a=component.exports},237:function(t,e,r){"use strict";var n=r(202);r.n(n).a},238:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,".m-message[data-v-7313c348]{position:fixed;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:20px;width:380px;text-align:center;z-index:99}.m-message--main[data-v-7313c348]{padding:10px;background:#ccc;border-radius:4px;display:flex;align-items:center}.m-message--icon[data-v-7313c348]{margin-right:5px}.m-message--success[data-v-7313c348]{color:#67c23a;background:#f0f9eb;border-color:#67c23a}.m-message--warning[data-v-7313c348]{color:#e6a23c;background:#fdf6ec;border-color:#e6a23c}.m-message--error[data-v-7313c348]{color:#f56c6c;background:#fef0f0;border-color:#f56c6c}.m-message .slide-fade-enter-active[data-v-7313c348],.m-message .slide-fade-leave-active[data-v-7313c348]{transition:all .5s ease}.m-message .slide-fade-enter[data-v-7313c348],.m-message .slide-fade-leave-to[data-v-7313c348]{-webkit-transform:translateY(-40px);transform:translateY(-40px);opacity:0}",""])},256:function(t,e,r){"use strict";r(36);var n=r(11),o=0;var l,c={data:function(){return{notices:[]}},methods:{add:function(t){var e=this,r="alert"+o++,l=Object(n.a)({name:r},t);this.notices.push(l);var c=t.duration||1,d=setTimeout(function(){e.remove(r),clearTimeout(d)},2e3*c)},remove:function(t){for(var e=this.notices,i=0;i<e.length;i++)if(e[i].name===t){this.notices.splice(i,1);break}}}},d=(r(237),r(34)),m=Object(d.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"m-message"},[r("transition",{attrs:{name:"slide-fade"}},t._l(t.notices,function(e,n){return r("div",{key:n,staticClass:"m-message--main",class:[t.type?"m-message--"+t.type:""]},[r("span",{staticClass:"m-message--message"},[t._v(t._s(e.content))])])}),0)],1)},[],!1,null,"7313c348",null).exports,f=r(0),h=function(t){return l=new f.a({render:function(e){return e(m,{props:t})}}).$mount(),document.body.appendChild(l.$el),l.$children[0]};function v(t){var e=h(t);e.type=t.type||"success",e.add({content:e.text||"请输入提示文字"})}v.success=function(content){var t=h();t.type="success",t.add({content:content})},v.error=function(content){var t=h();t.type="error",t.add({content:content})},f.a.prototype.$message=v},361:function(t,e,r){"use strict";r.r(e);r(35);var n=r(3),input=r(223),o=r(225),l=r(224),c=(r(256),{components:{mInput:input.a,mForm:o.a,mFormItem:l.a},data:function(){return{formValidate:{username:"shel",password:"12345"},ruleValidate:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],mail:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]}}},methods:{submitForm:function(){var t=this;this.$refs.form.validate(function(e){e&&t.login()})},restForm:function(){this.$refs.form.resetFields()},login:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.post("/login",this.formValidate);case 2:0===(e=t.sent).code?(this.$store.commit("setUser",e.data),this.$router.push("/book")):this.$message.error(e.message||"登陆失败");case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}),d=r(34),component=Object(d.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h4",[t._v("Login to Note")]),t._v(" "),r("m-form",{ref:"form",attrs:{model:t.formValidate,rules:t.ruleValidate}},[r("m-form-item",{attrs:{prop:"username"}},[r("m-input",{attrs:{type:"text",placeholder:"用户名"},model:{value:t.formValidate.username,callback:function(e){t.$set(t.formValidate,"username",e)},expression:"formValidate.username"}})],1),t._v(" "),r("m-form-item",{attrs:{prop:"password"}},[r("m-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.formValidate.password,callback:function(e){t.$set(t.formValidate,"password",e)},expression:"formValidate.password"}})],1)],1),t._v(" "),r("div",{staticClass:"reset-password"},[r("nuxt-link",{attrs:{to:"/retrievePassword",tag:"span"}},[t._v("ForgetPassword？")])],1),t._v(" "),r("button",{staticClass:"m-button",on:{click:t.submitForm}},[t._v("Login")]),t._v(" "),r("p",{staticClass:"sign-up"},[t._v("Don't have an account?"),r("nuxt-link",{attrs:{to:"/sign",tag:"span"}},[t._v("Sign up")])],1)],1)},[],!1,null,null,null);e.default=component.exports}}]);